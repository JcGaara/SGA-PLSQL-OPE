DECLARE LN_COUNT NUMBER;

BEGIN
  LN_COUNT := 0;
  ------------------------------------------------------------------------------------------
  -- INSERCION DE PARAMETRO VAL_SINGLE_PORTOUT
  ------------------------------------------------------------------------------------------ 
  SELECT COUNT(*)
    INTO LN_COUNT
    FROM OPEDD
   WHERE ABREVIACION ='VAL_SINGLE_PORTOUT'
   AND TIPOPEDD = (SELECT TIPOPEDD FROM TIPOPEDD WHERE ABREV='PORT_OUT');
   
  IF LN_COUNT > 0 THEN  
    DELETE FROM OPEDD
    WHERE ABREVIACION ='VAL_SINGLE_PORTOUT'
    AND TIPOPEDD = (SELECT TIPOPEDD FROM TIPOPEDD WHERE ABREV='PORT_OUT');
    COMMIT;
  END IF;  
          
  INSERT INTO OPEDD ( IDOPEDD, CODIGOC, CODIGON, DESCRIPCION,ABREVIACION,TIPOPEDD)
  VALUES ( (SELECT MAX(IDOPEDD) FROM OPEDD)+1, 100,100,'Validar Single en Port Out','VAL_SINGLE_PORTOUT',
		  (SELECT TIPOPEDD FROM TIPOPEDD WHERE ABREV='PORT_OUT'));
    COMMIT;   
  LN_COUNT := 0;  
  ------------------------------------------------------------------------------------------
  -- INSERCION DE PARAMETRO CONTRATA POR DEFECTO
  ------------------------------------------------------------------------------------------ 
  SELECT COUNT(*)
    INTO LN_COUNT
    FROM OPEDD
   WHERE ABREVIACION ='CONTR_DEFECTO'
   AND TIPOPEDD = (SELECT TIPOPEDD FROM TIPOPEDD WHERE ABREV='CONF_ALTA_PORTOUT');
          
   IF LN_COUNT > 0 THEN
	   DELETE FROM OPEDD
	   WHERE ABREVIACION ='CONTR_DEFECTO'
	   AND TIPOPEDD = (SELECT TIPOPEDD FROM TIPOPEDD WHERE ABREV='CONF_ALTA_PORTOUT');
	   COMMIT;
   END IF;
    
	INSERT INTO OPEDD ( IDOPEDD, CODIGOC, CODIGON, DESCRIPCION,ABREVIACION,TIPOPEDD,CODIGON_AUX)
	VALUES ( (SELECT MAX(IDOPEDD) FROM OPEDD)+1, NULL,1,'INTERNET LTE','CONTR_DEFECTO',
			 (SELECT TIPOPEDD FROM TIPOPEDD WHERE ABREV='CONF_ALTA_PORTOUT'),2);
	COMMIT;
     
END;
/

